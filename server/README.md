# Schedule Bot API

Серверная часть проекта бота для Slack и Telegram, который умеет отправлять сообщения по расписанию.

Фронтенд находится в [другом репозитории](https://github.com/vovachebr/schedule-bot-ui)

Связь с разработчиками — #butler_bot в Слаке Нетологии. 

## Технические детали

Сервер работает на [`express`](https://expressjs.com/).

Основные обязанности сервера:
* предоставление данных [фронтенду проекта](https://github.com/vovachebr/schedule-bot-ui)
* работа с MongoDB для хранения данных 
* взаимодействие с API Slack и Telegram
* для выполнения задач по расписанию используется [Heroku Scheduler](https://devcenter.heroku.com/articles/scheduler) 

### База данных

В качестве базы данных используется MongoDB. Работа с ней происходит через официальный клиент.

В базе данных хранятся две коллекции:
* хуки (hooks)
* лекции (lessons)

*Хуки* — это уникальные эндпоинты, с помощью которых бот отправляет сообщения в определенный канал. 
Для каждого канала студентов есть собственный хук в MongoDB. Дополнительно там хранится так же называние группы, id 
и название канала.

*Лекции* — информация о названии, дате проведения, анонсе лекции. Сформированные на базе этой информации
сообщения автоматически отправляются студентам.


## Разработка

1. Установи зависимости `npm i`
1. Создай файл `.env` в корне проекта. Добавь в него следующие переменные:
    * `MONGODB_URI` — ссылка для подключения к MongoDB с данными
    * `PORT` — порт, на котором должен работать сервер (обычно 8080)
    * `TELEGRAM_BOT_TOKEN` — токен телеграм бота
1. Запусти локальный сервер `npm start`
 